<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://smilehacker.com/theme/css/style.css"> 
    <link rel="stylesheet" type="text/css" href="http://smilehacker.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
    <link href="http://smilehacker.com/" type="application/atom+xml" rel="alternate" title="SmileHacker ATOM Feed" />
    
            <title>SmileHacker - Articles by Sai</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://smilehacker.com" class="">SmileHacker</a></h1>
            <h2></h2>
        </div>
        <div class="nav-button">
            <ul>
                                                                                                                                        <li><a href="http://weibo.com/zhouquanbest">Weibo</a></li>
                                                <li><a href="http://hustunique.com">Unique Studio</a></li>
                                 </ul>
         </div>
     </section>

     <section id="sidebar">
        <div class="user_meta">
            <h1 id="user"><a href="http://smilehacker.com" class="">SmileHacker</a></h1>
            <h2></h2>
            <ul>
                                                                                                                <li><a href="http://weibo.com/zhouquanbest">Weibo</a></li>
                                        <li><a href="http://hustunique.com">Unique Studio</a></li>
                            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
                    <article class='listed'>
            <h1 class="title">
                <a href="http://smilehacker.com/about-me-no-need.html" rel='bookmark'>ABOUT ME? NO NEED</a>
            </h1>
            <div class="article-content"> <hr />
<p><img alt="My sadness strength my wings" src="http://i3.minus.com/ibtjRBCiqQzIwK.jpg" /></p>
<p>朋友今天取笑我：“你丫这blog够简洁的，连个'about me'都没有。“
确实，自从由Wordpress换成Hexo后，就没怎么打点这一寸三亩地，直接套用默认模板，最开始连个feed都没加。
不过，那些东西又有什么意义呢？</p>
<p>最早写Blog是从高一开始，那时年轻气盛，为了丁点的虚荣心，绞尽脑汁的去打点。看着点击在一月内破20万甚是高兴，可之后呢，依旧是空虚。可以说那时候的Blog是为了炫耀，多么傻，多么天真。
后来到了大学，人也成熟了些，Blog开始记录些技术文、一些心情、一些随笔。去掉了流量分析，去掉了访问量，去掉了浮云。
不知为何，现在看得更开了，技术文就由Evernote记录吧，心情交给日记，随笔有所感还是会更新下。至于About me，那最后的虚荣，也就忽略吧。</p>
<p>认识你的人，不会在意你的面具，不认识你的人，不在意你是谁。本是尘归尘，土归土，又何必在意那个名字呢。</p>
<p>就仅在这网络的一个小角落，留下迷失的自我吧。</p> </div>
            <div class="abbr published">Posted <a href='http://smilehacker.com/about-me-no-need.html' title='2013-03-29T12:09:36'>五 29 三月 2013</a></div>
        </article>
            <article class='listed'>
            <h1 class="title">
                <a href="http://smilehacker.com/eclipseti-shi-kuang-yan-se-she-zhi.html" rel='bookmark'>Eclipse提示框颜色设置</a>
            </h1>
            <div class="article-content"> <hr />
<p><img alt="不知不觉又到情人节了 离找到心爱之人又近了一年" src="http://i.minus.com/jzqg4E3jT86sO.jpg" /></p>
<p>以前在ubuntu下用Eclipse时一直很纳闷，为何提示框的背景是黑的，内容很难辨别。遍历完设置也没找到选项能改颜色。<br />
后来发现改系统主题时提示框颜色倒变了，料想eclipse偷懒直接调用的系统颜色。<br />
现在用arch了，在自己调配主题时倒找到的修改的办法：  </p>
<p>Linux主题文件位于<em>/usr/share/themes/</em>下对应的主题文件夹下
比如我正在用使用<strong>Gnome-Cupertino</strong>主题，就进入到<strong>/usr/share/themes/Gnome-Cupertino/</strong>目录下 <br />
<code>cd /usr/share/themes/Gnome-Cupertino</code></p>
<p>打开gtk-2.0/gtkrc文件<br />
<code>sudo vim gtk-2.0/gtkrc</code></p>
<p>修改的<strong>tooltip_fg_color</strong>和<strong>tooltip_bg_color</strong>两个属性的值，如果没有改属性，可以自行添加<br />
<code>gtk-color-scheme = "tooltip_bg_color:#f2edbc\ntooltip_fg_color:#000000\nlink_color:#0033ff"</code>  </p>
<p>然后保存退出，打开系统外观配置，切换一下主题，当切换回来的时候，修改的效果就生效了  </p> </div>
            <div class="abbr published">Posted <a href='http://smilehacker.com/eclipseti-shi-kuang-yan-se-she-zhi.html' title='2013-02-13T13:02:47'>三 13 二月 2013</a></div>
        </article>
            <article class='listed'>
            <h1 class="title">
                <a href="http://smilehacker.com/he-tang-bu-zai.html" rel='bookmark'>荷塘不再</a>
            </h1>
            <div class="article-content"> <hr />
<p>八月中旬，回想起来，已经走过多少个夏夜了。</p>
<p>回首四顾，站在混凝土的墓碑间，任月下的寒风透过，只能孤独的回忆，回忆那逝去的昨天。</p>
<p>昨天，我还在乡间的田野中飞驰，感受炎炎的骄阳，感受狂躁的季风。</p>
<p>那是焦躁而又可爱的阳光，温顺的洒在你身上，好奇的看着升腾的热气，傻傻地笑着——那是没有掩饰的热情，真正的阳光。</p>
<p>那是高傲而又温柔的狂风，呼啸者穿过麦田，带走我手中的风筝，在热浪中撕嚎——那是毫无拘束的自由，真正的风。</p>
<p>他们陪伴着我，好奇地认识这个世界。我们来到了那里，那边静静的荷塘。</p>
<p>&nbsp;</p>
<p>这是一篇普通的水塘，作为旁边大鱼塘的附属，一直为干旱做准备。人们觉得她太寂寞了，于是种上了莲藕，于是，在夏天，她便如灰姑娘般的成为了公主。</p>
<p>我很喜欢她，既为我们提供了芳香，也带来了果实。摘取一片大大的荷叶，像个精灵般躲在下面，偷吃着莲子，为甘甜欣喜，为苦涩嚼舌。有蜻蜓做伴，有蝴蝶为舞，有蛙声奏乐，有聪明喝彩。这边是昨天的荷塘，那个为人小憩的天地。</p>
<p>她没有朱自清的赞笔，但她有我的记忆；他没有陶渊明的倾心，但她有我的怀念。那就是真实的她，来自于我的昨天，我的心灵，我曾经拥有过她。</p>
<p>心，不经意间颤抖；泪，不经意间流下。</p>
<p>被喧闹唤醒，原来我还在这黑暗的城市，被孤独包围，被凄暗占领。我独自走在大街上，身后是霓虹，身前是嘈杂。匆匆流过，没带走什么，没留下什么，好像我并不存在。</p>
<p>到底哪个才是真实的世界，我疑惑；我应该走向何处，我不解。</p>
<p>又是八月，又是炎阳，却没了和风，没了淡香，没了甘甜，没了自在。</p>
<p>如果有一天，我将终止我的步伐，我会回到我的出生点，去重温那片荷塘，去找回失落的温暖。</p>
<p>&nbsp;
<p style="text-align: right;">                                                                                            ——记逝去的故乡</p>
&nbsp;</p>
<p>&nbsp;</p>
<p>由于土地开发，我土生土长的故乡已经不复存在了，现在竖起的高楼，只能成为住处，而不是乡。故乡不只是一个出生点的代名词，他的背后还有很多含义。她是你精神的支柱，让你有归属感；她是你童年的摇篮，让你有存在感。现在，我就像个流浪的灵魂，没了家。</p> </div>
            <div class="abbr published">Posted <a href='http://smilehacker.com/he-tang-bu-zai.html' title='2013-02-07T21:09:44'>四 07 二月 2013</a></div>
        </article>
            <article class='listed'>
            <h1 class="title">
                <a href="http://smilehacker.com/hei-li-shi.html" rel='bookmark'>黑历史</a>
            </h1>
            <div class="article-content"> <hr />
<p>在很久很久以前
有五个茫然年轻人
他们厌倦了平淡的世界
有一个人说道
“该做些什么吧”</p>
<p>于是五个人变成了十三个人
用汗水画着0和1
后来他们站在了高台上 一个带着老式眼镜
顶着一头乱糟糟头发的人
为他们带上了桂冠</p>
<p>他们成了英雄
他们不希望这里失去他们的意志
他们坚持在这里建立了自己的主权
他们让后来者在他们的光环下继续着辉煌</p>
<p>但继任者也同时继承了先驱不拘的个性
相对于保护
他们更期望厮杀
有一个人说道
“该做些什么吧”</p>
<p>于是一场政变发生了
他们胜利了
先驱者带着欣慰离开了
但他们的精神
依旧留下了</p>
<p>后来的后来
新鲜的血液迭代着
作为他们的继承者
我们不屈的占据着顶点
荣誉与血性与我们同在</p> </div>
            <div class="abbr published">Posted <a href='http://smilehacker.com/hei-li-shi.html' title='2013-02-07T20:55:16'>四 07 二月 2013</a></div>
        </article>
            <article class='listed'>
            <h1 class="title">
                <a href="http://smilehacker.com/li-yong-rsynczi-dong-tong-bu-fu-wu-qi-yu-ben-di-dai-ma-de-pythonjiao-ben.html" rel='bookmark'>利用rsync自动同步服务器与本地代码的python脚本</a>
            </h1>
            <div class="article-content"> <hr />
<p><img alt="x" src="http://i.minus.com/ibnh2sUjx4w0D0.jpg" />  </p>
<p>菜鸟表示写web时 每次修改完后把文件往VPS上丢很麻烦<br />
用ssh sshfs scp都太慢  小东西又懒得用git<br />
sublimetext上得sftp不支持中文 emacs干脆就只能ssh  </p>
<p>于是用linux自带的rsync写了个同步脚本<br />
可以手动或自动往服务器上差异性同步 不用scp一堆东西 也不用忍受ssh那个渣速度  </p>
<ol>
<li>
<p>把脚本copy到你的目录 修改脚本内的配置 如果在脚本内设置了密码 那每次上次就会自动输入密码 否则除非你设置本地key 否则都要输密码</p>
</li>
<li>
<p>如果代码在服务器上 先执行 ： <code>python rsync.py -down</code> 
   把代码download下来 ， 个人觉得先down下来再修改 不用忍受每次load一遍 比较舒服</p>
</li>
<li>
<p>每次修改完了 可以手动上传:<code>python rsync,py</code>
    或者也可以放在后台自动上传：<code>python rsync.py -auto</code>
    他会监视改目录的文件 如果新建 修改或删除 都会sync
    可以用 <code>nohup python rsync.py -auto&amp;</code> 
    来后台运行</p>
</li>
<li>
<p>只根据emacs优化了 vim党自己改</p>
</li>
<li>
<p>sync时会忽略隐藏文件和临时文件</p>
</li>
</ol>
<!-- more -->

<div class="highlight"><pre><span class="c"># use rsync to sync code from server</span>
<span class="c"># coding = UTF8</span>
<span class="c"># @author Kleist Zhou</span>
<span class="c"># 2013/2/5</span>

<span class="c"># Need pyinotify, pexpect</span>
<span class="c"># please use easy_install to add in</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pyinotify</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="c"># your sync config</span>
<span class="n">server</span> <span class="o">=</span> <span class="s">&#39;199.245.60.73&#39;</span>
<span class="n">user</span> <span class="o">=</span> <span class="s">&#39;root&#39;</span>
<span class="n">password</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">port</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">source</span> <span class="o">=</span> <span class="s">&#39;./&#39;</span>
<span class="n">target</span> <span class="o">=</span> <span class="s">&#39;/srv/www/love/public_html/&#39;</span>
<span class="n">options</span> <span class="o">=</span> <span class="s">&quot;-rtvuC --delete --progress --exclude=&#39;rsync.py&#39;&quot;</span>

<span class="c">#custom regular expression</span>
<span class="n">rulers</span> <span class="o">=</span> <span class="p">(</span><span class="s">r&quot;[#~.][\s\S]*&quot;</span><span class="p">,</span> <span class="s">r&quot;[\s\S]*[#~]&quot;</span><span class="p">,</span> <span class="s">r&quot;[\s\S]*_flymake.[\s\S]*&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">port</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
    <span class="n">port</span> <span class="o">=</span> <span class="s">&quot;-e &#39;ssh -p </span><span class="si">%d</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">port</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">runCmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">password</span>
    <span class="k">if</span> <span class="n">password</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pexpect</span>
        <span class="k">print</span> <span class="n">cmd</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">expect</span><span class="p">([</span><span class="s">&#39;password: &#39;</span><span class="p">,</span> <span class="s">&#39;continue connecting (yes/no)?&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s">&#39;yes&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">EOF</span><span class="p">:</span>
            <span class="n">child</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="n">pexpect</span><span class="o">.</span><span class="n">EOF</span><span class="p">)</span>
            <span class="n">child</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">sync</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">server</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">option</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;rsync </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">@</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">server</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
    <span class="c">#print cmd</span>
    <span class="n">runCmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">download</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">server</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">option</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;rsync </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">@</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">server</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">cmd</span>
    <span class="n">runCmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">OnChangeHandler</span><span class="p">(</span><span class="n">pyinotify</span><span class="o">.</span><span class="n">ProcessEvent</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">checkFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">rulers</span>
        <span class="k">for</span> <span class="n">ruler</span> <span class="ow">in</span> <span class="n">rulers</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">ruler</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">syncFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
            <span class="n">sync</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">process_IN_CREATE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c">#print &quot;Create file: %s &quot; % os.path.join(event.path,event.name)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncFile</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_IN_DELETE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c">#print &quot;Delete file: %s &quot; % os.path.join(event.path,event.name)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncFile</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_IN_MODIFY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c">#print &quot;Modify file: %s &quot; % os.path.join(event.path,event.name)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syncFile</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">auto_sync</span><span class="p">():</span>
    <span class="n">wm</span> <span class="o">=</span> <span class="n">pyinotify</span><span class="o">.</span><span class="n">WatchManager</span><span class="p">()</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">pyinotify</span><span class="o">.</span><span class="n">IN_CREATE</span> <span class="o">|</span> <span class="n">pyinotify</span><span class="o">.</span><span class="n">IN_DELETE</span> <span class="o">|</span> <span class="n">pyinotify</span><span class="o">.</span><span class="n">IN_MODIFY</span>
    <span class="n">notifier</span> <span class="o">=</span> <span class="n">pyinotify</span><span class="o">.</span><span class="n">Notifier</span><span class="p">(</span><span class="n">wm</span><span class="p">,</span> <span class="n">OnChangeHandler</span><span class="p">())</span>
    <span class="n">wm</span><span class="o">.</span><span class="n">add_watch</span><span class="p">(</span><span class="s">&quot;./&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">rec</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">auto_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">notifier</span><span class="o">.</span><span class="n">loop</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">option</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s">&#39;-down&#39;</span><span class="p">:</span>
            <span class="n">download</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">option</span> <span class="o">==</span> <span class="s">&#39;-auto&#39;</span><span class="p">:</span>
            <span class="n">auto_sync</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sync</span><span class="p">()</span>

<span class="c"># main</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div> </div>
            <div class="abbr published">Posted <a href='http://smilehacker.com/li-yong-rsynczi-dong-tong-bu-fu-wu-qi-yu-ben-di-dai-ma-de-pythonjiao-ben.html' title='2013-02-07T21:27:06'>四 07 二月 2013</a></div>
        </article>
        <p class="paginator">
		                                    <a href="http://smilehacker.com/author/sai/index2.html" class="button_accent" style="position: absolute; right: 0;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
                	</p>
    </section>

    </body>
</html>